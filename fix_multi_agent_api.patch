# Fix для introspection_api.py
# Проблема: online_agents возвращается как строка repr() вместо JSON

## В файле core/introspection_api.py

### Найди строки ~515-525:

```python
async def _handle_multi_agent(self, request: web.Request) -> web.Response:
    """GET /multi-agent - Stage 27"""
    try:
        multi_agent = self._c.get("multi_agent")
        if not multi_agent:
            return self._json({"error": "MultiAgentCoordinator not available"})
        
        stats = multi_agent.get_stats()
        online = multi_agent.get_online_agents()
        
        return self._json({
            "online_agents": online,
            "stats": stats
        })
```

### Замени на:

```python
async def _handle_multi_agent(self, request: web.Request) -> web.Response:
    """GET /multi-agent - Stage 27"""
    try:
        multi_agent = self._c.get("multi_agent")
        if not multi_agent:
            return self._json({"error": "MultiAgentCoordinator not available"})
        
        stats = multi_agent.get_stats()
        online = multi_agent.get_online_agents()
        
        # ✅ FIX: Сериализуем AgentInfo в словари
        online_serialized = []
        for agent in online:
            if hasattr(agent, '__dict__'):
                # Если это dataclass или класс с __dict__
                online_serialized.append({
                    'agent_id': agent.agent_id,
                    'name': agent.name,
                    'specialization': agent.specialization,
                    'host': agent.host,
                    'port': agent.port,
                    'status': agent.status,
                    'last_heartbeat': agent.last_heartbeat,
                    'capabilities': agent.capabilities,
                    'load': getattr(agent, 'load', 0.0)
                })
            else:
                # Fallback если это уже словарь
                online_serialized.append(agent)
        
        return self._json({
            "online_agents": online_serialized,
            "stats": stats
        })
```

## Сохрани и перезапусти main.py
